"use strict";!function(){function a(a){return["$rootScope","$window",function(b,c){for(var d,e,f,g=c[a]||(console.warn("This browser does not support Web Storage!"),{}),h={$default:function(a){for(var b in a)angular.isDefined(h[b])||(h[b]=a[b]);return h},$reset:function(a){for(var b in h)"$"===b[0]||delete h[b];return h.$default(a)}},i=0;i<g.length;i++)(f=g.key(i))&&"ngStorage-"===f.slice(0,10)&&(h[f.slice(10)]=angular.fromJson(g.getItem(f)));return d=angular.copy(h),b.$watch(function(){e||(e=setTimeout(function(){if(e=null,!angular.equals(h,d)){angular.forEach(h,function(a,b){angular.isDefined(a)&&"$"!==b[0]&&g.setItem("ngStorage-"+b,angular.toJson(a)),delete d[b]});for(var a in d)g.removeItem("ngStorage-"+a);d=angular.copy(h)}},100))}),"localStorage"===a&&c.addEventListener&&c.addEventListener("storage",function(a){"ngStorage-"===a.key.slice(0,10)&&(a.newValue?h[a.key.slice(10)]=angular.fromJson(a.newValue):delete h[a.key.slice(10)],d=angular.copy(h),b.$apply())}),h}]}angular.module("ngStorage",[]).factory("$localStorage",a("localStorage")).factory("$sessionStorage",a("sessionStorage"))}(),function(a,b){angular.module("vsBrowserStorageAPI",["ngStorage"]),angular.module("vsBrowserStorageAPI").factory("ngStorageAPI",["$localStorage","$sessionStorage",function(a,b){function c(a){this._ngStorageService=a}return c.prototype.set=function(a,b){this._ngStorageService[a]=b},c.prototype.get=function(a){return this._ngStorageService[a]},c.LOCAL_STORAGE_SERVICE=a,c.SESSION_STORAGE_SERVICE=b,c}]),angular.module("vsBrowserStorageAPI").factory("vsLocalStorageAPI",["ngStorageAPI",function(a){var b=a.LOCAL_STORAGE_SERVICE,c=new a(b);return c}]),angular.module("vsBrowserStorageAPI").factory("vsSessionStorageAPI",["ngStorageAPI",function(a){var b=a.SESSION_STORAGE_SERVICE,c=new a(b);return c}]),angular.module("vsHandyStorage",["vsBrowserStorageAPI"]),angular.module("vsHandyStorage").factory("vsStorageModelValidator",function(){function a(a){return"[object Object]"===Object.prototype.toString.call(a)}function b(b){return a(b)}function c(a){var b=null===a,c=""===(""+a).trim();return!b&&!c}return{isValid:b,isValueValid:c}}),angular.module("vsHandyStorage").factory("vsStorageControllerProvider",["vsStorageModelValidator",function(a){function b(a){return angular.isDefined(a.set)&&angular.isDefined(a.get)}function c(c,d){function e(b,e,f){var g=f[c],h=d.get(g);if(!g)throw new Error("Bad storage name");if(!a.isValid(h)){var i={};d.set(g,i),h=d.get(g)}this.put=function(b,c){h[b]=a.isValueValid(c)?c:void 0},this.get=function(a){return h[a]}}if(!b(d))throw new Error("browserStorageAPI should have setter and getter");return e}return{getController:c}}]),angular.module("vsHandyStorage").directive("vsLocalStorage",["vsStorageControllerProvider","vsLocalStorageAPI",function(a,b){return{restrict:"A",controller:["$scope","$element","$attrs",a.getController("vsLocalStorage",b)]}}]),angular.module("vsHandyStorage").directive("vsSessionStorage",["vsStorageControllerProvider","vsSessionStorageAPI",function(a,b){return{restrict:"A",controller:["$scope","$element","$attrs",a.getController("vsSessionStorage",b)]}}]),angular.module("vsHandyStorage").directive("vsLinkStorage",function(){return{restrict:"A",require:["?^^vsLocalStorage","?^^vsSessionStorage","ngModel"],link:function(a,b,c,d){function e(a){h.$dirty&&g.put(i,a)}var f,g=d[0]||d[1],h=d[2],i=c.name;if(!g)throw new Error("Storage is undefined");f=g.get(i),function(a){void 0!==a&&(h.$setViewValue(a),h.$render())}(f),a.$watch(c.ngModel,e)}}})}(window,document);